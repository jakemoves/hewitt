# hewitt
A bookmarklet that turns any webpage into a Sol Hewitt drawing

<a href="javascript:(function(){%20%20var%20lineColour%20=%20'rgba(0,0,255,%200.2)';%20%20%20%20var%20prefersDarkScheme%20=%20window.matchMedia('(prefers-color-scheme:%20dark)');%20%20if(prefersDarkScheme.matches){%20%20%20%20lineColour%20=%20'rgba(255,%20255,%20255,%200.2)'%20%20}%20%20var%20inputs%20=%20Array.from(window.document.getElementsByTagName('input'));%20%20var%20links%20=%20Array.from(window.document.getElementsByTagName('a'));%20%20var%20buttons%20=%20Array.from(window.document.getElementsByTagName('button'));%20%20var%20elements%20=%20[...inputs,%20...links,%20...buttons];%20%20%20%20var%20vw%20=%20window.visualViewport.width;%20%20var%20vh%20=%20window.visualViewport.height;%20%20var%20elementBoundingRects%20=%20elements.map(%20el%20=>%20{%20%20%20%20return%20el.getBoundingClientRect();%20%20});%20%20var%20onscreenElementBoundingRects%20=%20elementBoundingRects.filter(%20rect%20=>%20{%20%20%20%20return%20(rect.top%20<%20vh%20&&%20rect.left%20<%20vw)%20&&%20(rect.width%20>%200%20&&%20rect.height%20>%200);%20%20});%20%20%20%20onscreenBoxes%20=%20onscreenElementBoundingRects.map(%20rect%20=>%20{%20%20%20%20return%20%20{%20%20%20%20%20%20left:%20rect.left,%20%20%20%20%20%20top:%20rect.top,%20%20%20%20%20%20bottom:%20rect.bottom,%20%20%20%20%20%20right:%20rect.right,%20%20%20%20%20%20width:%20rect.width,%20%20%20%20%20%20height:%20rect.height,%20%20%20%20%20%20corners:%20[%20%20%20%20%20%20%20%20[rect.left,%20rect.top],%20%20%20%20%20%20%20%20[rect.right,%20rect.top],%20%20%20%20%20%20%20%20[rect.right,%20rect.bottom],%20%20%20%20%20%20%20%20[rect.left,%20rect.bottom]%20%20%20%20%20%20]%20%20%20%20}%20%20});%20%20var%20corners%20=%20[];%20%20onscreenBoxes.forEach(%20box%20=>%20{%20%20%20%20corners.push(...box.corners)%20%20});%20%20var%20svg%20=%20document.createElementNS('http://www.w3.org/2000/svg',%20'svg');%20%20svg.setAttribute('viewBox',%20'0%200%20'%20+%20vw%20+%20'%20'%20+%20vh);%20%20svg.setAttributeNS('http://www.w3.org/2000/xmlns/',%20'xmlns:xlink',%20'http://www.w3.org/1999/xlink');%20%20svg.setAttribute('stroke',%20'blue');%20%20svg.setAttribute('fill',%20'none');%20%20svg.style.position%20=%20'absolute';%20%20svg.style.width%20=%20vw%20+%20'px';%20%20svg.style.height%20=%20vh%20+%20'px';%20%20svg.style.top%20=%200;%20%20svg.style.left%20=%200;%20%20svg.style.zIndex%20=%20999999;%20%20svg.style.pointerEvents%20=%20'none';%20%20drawLinesByBoxes(onscreenBoxes);%20%20document.body.prepend(svg);%20%20function%20drawLinesByBoxes(boxes){%20%20%20%20for(var%20i%20=%200;%20i%20<%20boxes.length%20-%201;%20i++){%20%20%20%20%20%20var%20box1%20=%20boxes[i];%20%20%20%20%20%20%20%20%20%20%20%20/*%20%20%20%20%20%20var%20rect%20=%20document.createElementNS('http://www.w3.org/2000/svg',%20'rect');%20%20%20%20%20%20rect.setAttribute('x',%20box1.left);%20%20%20%20%20%20rect.setAttribute('y',%20box1.top);%20%20%20%20%20%20rect.setAttribute('width',%20box1.width);%20%20%20%20%20%20rect.setAttribute('height',%20box1.height);%20%20%20%20%20%20svg.appendChild(rect);%20%20%20%20%20%20*/%20%20%20%20%20%20for(var%20j%20=%20i+1;%20j%20<%20boxes.length;%20j++){%20%20%20%20%20%20%20%20var%20box2%20=%20boxes[j];%20%20%20%20%20%20%20%20/*%20%20%20%20%20%20%20%20var%20rect%20=%20document.createElementNS('http://www.w3.org/2000/svg',%20'rect');%20%20%20%20%20%20%20%20rect.setAttribute('x',%20box2.left);%20%20%20%20%20%20%20%20rect.setAttribute('y',%20box2.top);%20%20%20%20%20%20%20%20rect.setAttribute('width',%20box2.width);%20%20%20%20%20%20%20%20rect.setAttribute('height',%20box2.height);%20%20%20%20%20%20%20%20svg.appendChild(rect);%20%20%20%20%20%20%20%20*/%20%20%20%20%20%20%20%20for(corner%20of%20box1.corners){%20%20%20%20%20%20%20%20%20%20for(let%20k%20=%200;%20k%20<%203;%20k++){%20%20%20%20%20%20%20%20%20%20%20%20var%20line%20=%20document.createElementNS('http://www.w3.org/2000/svg',%20'line');%20%20%20%20%20%20%20%20%20%20%20%20line.setAttribute('stroke-width',%200.25);%20%20%20%20%20%20%20%20%20%20%20%20line.setAttribute('stroke',%20lineColour);%20%20%20%20%20%20%20%20%20%20%20%20line.setAttribute('x1',%20corner[0]);%20%20%20%20%20%20%20%20%20%20%20%20line.setAttribute('y1',%20corner[1]);%20%20%20%20%20%20%20%20%20%20%20%20line.setAttribute('x2',%20box2.corners[k][0]);%20%20%20%20%20%20%20%20%20%20%20%20line.setAttribute('y2',%20box2.corners[k][1]);%20%20%20%20%20%20%20%20%20%20%20%20svg.appendChild(line);%20%20%20%20%20%20%20%20%20%20%20}%20%20%20%20%20%20%20%20%20%20%20}%20%20%20%20%20%20}%20%20%20%20}%20%20}%20%20function%20brightnessByColor%20(color)%20{%20%20%20%20var%20color%20=%20''%20+%20color,%20isHEX%20=%20color.indexOf('#')%20==%200,%20isRGB%20=%20color.indexOf('rgb')%20==%200;%20%20%20%20if%20(isHEX)%20{%20%20%20%20%20%20const%20hasFullSpec%20=%20color.length%20==%207;%20%20%20%20%20%20var%20m%20=%20color.substr(1).match(hasFullSpec%20?%20/(\S{2})/g%20:%20/(\S{1})/g);%20%20%20%20%20%20if%20(m)%20var%20r%20=%20parseInt(m[0]%20+%20(hasFullSpec%20?%20''%20:%20m[0]),%2016),%20g%20=%20parseInt(m[1]%20+%20(hasFullSpec%20?%20''%20:%20m[1]),%2016),%20b%20=%20parseInt(m[2]%20+%20(hasFullSpec%20?%20''%20:%20m[2]),%2016);%20%20%20%20}%20%20%20%20if%20(isRGB)%20{%20%20%20%20%20%20var%20m%20=%20color.match(/(\d+){3}/g);%20%20%20%20%20%20if%20(m)%20var%20r%20=%20m[0],%20g%20=%20m[1],%20b%20=%20m[2];%20%20%20%20}%20%20%20%20if%20(typeof%20r%20!=%20'undefined')%20return%20((r*299)+(g*587)+(b*114))/1000;%20%20}})();">Add this link to you book</a>
